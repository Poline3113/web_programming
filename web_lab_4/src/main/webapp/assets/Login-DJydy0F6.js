import{_ as u,c as m,a as r,w as n,v as l,b as d,r as p,l as g,o as w}from"./index-lyvliRIR.js";const f={name:"Login",data(){return{username:"",password:"",loginUsername:"",loginPassword:""}},methods:{async logIn(){if(!this.loginUsername||!this.loginPassword){this.errorHandler("Введите имя пользователя и пароль");return}try{await g({username:this.loginUsername,password:this.loginPassword}),this.showNotification("Вход в аккаунт","Успешный вход","success"),this.$router.push({name:"main-page"})}catch(o){this.errorHandler("Ошибка входа: "+(o.response?.data?.message||o.message))}},async registerUser(){if(!this.username||!this.password){this.errorHandler("Введите имя пользователя и пароль");return}try{await p({username:this.username,password:this.password}),this.showNotification("Регистрация","Успешная регистрация","success"),this.username="",this.password="",this.loginUsername="",this.loginPassword="",this.$notify({group:"info",title:"Регистрация",text:"Регистрация успешно завершена",type:"info"})}catch(o){this.errorHandler("Ошибка регистрации: "+(o.response?.data?.message||o.message))}},showNotification(o,s,a){this.$notify({group:"success",title:o,text:s,type:a})},errorHandler(o){this.$notify({group:"error",title:"Ошибка",text:o,type:"error"})}}},y={class:"registration-container"},U={class:"form-group"},v={class:"form-group"},b={class:"form-group"},h={class:"form-group"};function x(o,s,a,P,t,i){return w(),m("div",y,[s[12]||(s[12]=r("h2",null,"Регистрация",-1)),r("form",{onSubmit:s[2]||(s[2]=d((...e)=>i.registerUser&&i.registerUser(...e),["prevent"]))},[r("div",U,[s[6]||(s[6]=r("label",{for:"username"},"Имя пользователя:",-1)),n(r("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=e=>t.username=e),type:"text",required:""},null,512),[[l,t.username,void 0,{trim:!0}]])]),r("div",v,[s[7]||(s[7]=r("label",{for:"password"},"Пароль:",-1)),n(r("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=e=>t.password=e),type:"password",required:""},null,512),[[l,t.password,void 0,{trim:!0}]])]),s[8]||(s[8]=r("button",{type:"submit"},"Зарегистрироваться",-1))],32),s[13]||(s[13]=r("h2",null,"Вход",-1)),r("form",{onSubmit:s[5]||(s[5]=d((...e)=>i.logIn&&i.logIn(...e),["prevent"]))},[r("div",b,[s[9]||(s[9]=r("label",{for:"loginUsername"},"Имя пользователя:",-1)),n(r("input",{id:"loginUsername","onUpdate:modelValue":s[3]||(s[3]=e=>t.loginUsername=e),type:"text",required:""},null,512),[[l,t.loginUsername,void 0,{trim:!0}]])]),r("div",h,[s[10]||(s[10]=r("label",{for:"loginPassword"},"Пароль:",-1)),n(r("input",{id:"loginPassword","onUpdate:modelValue":s[4]||(s[4]=e=>t.loginPassword=e),type:"password",required:""},null,512),[[l,t.loginPassword,void 0,{trim:!0}]])]),s[11]||(s[11]=r("button",{type:"submit"},"Войти",-1))],32)])}const V=u(f,[["render",x]]);export{V as default};
